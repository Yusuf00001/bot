<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Resmi Belge Ãœretim Paneli</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --tg-theme-bg-color: #f0f2f5; --tg-theme-button-color: #2481cc; --tg-theme-text-color: #000000; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--tg-theme-bg-color); color: var(--tg-theme-text-color); padding: 0; margin: 0; overflow-x: hidden; }
        .tabs { display: flex; background: #fff; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .tab { flex: 1; padding: 15px; text-align: center; font-weight: bold; font-size: 14px; cursor: pointer; color: #777; border-bottom: 3px solid transparent; transition: 0.3s; }
        .tab.active { color: var(--tg-theme-button-color); border-bottom-color: var(--tg-theme-button-color); background: #f8f9fa; }
        .content-section { display: none; padding: 15px; padding-bottom: 80px; }
        .content-section.active { display: block; }
        .card { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 20px; border: 1px solid #eee; }
        select, input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 15px; outline: none; transition: 0.2s; background: #fff; }
        select:focus, input:focus { border-color: var(--tg-theme-button-color); box-shadow: 0 0 0 2px rgba(36, 129, 204, 0.1); }
        label { font-size: 11px; font-weight: 700; color: #555; display: block; margin-top: 12px; text-transform: uppercase; letter-spacing: 0.5px; }
        .btn { background: var(--tg-theme-button-color); color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 15px; }
        .btn-wallet { background: #28a745; margin-top: 5px; font-size: 13px; padding: 10px; }
        .wallet-box { background: #f8f9fa; border: 2px dashed #cbd5e0; padding: 15px; border-radius: 10px; word-break: break-all; font-family: monospace; font-size: 16px; text-align: center; margin-top: 10px; color: #2d3748; font-weight: bold; }
        .btn-support { background: #fff; color: #2481cc; border: 2px solid #2481cc; padding: 12px; border-radius: 10px; font-size: 14px; font-weight: bold; text-decoration: none; display: block; text-align: center; margin-top: 30px; }
    </style>
</head>
<body>

    <div class="tabs">
        <div class="tab active" onclick="switchTab('islem-tab', this)">ðŸ›  Ä°ÅŸlemler</div>
        <div class="tab" onclick="switchTab('bakiye-tab', this)">ðŸ’° Bakiye & Destek</div>
    </div>

    <div id="islem-tab" class="content-section active">
        <div class="card">
            <label>BELGE TÃœRÃœ SEÃ‡Ä°NÄ°Z</label>
            <select id="typeSelect" onchange="createForm()">
                <option value="">-- SEÃ‡Ä°N --</option>
                <option value="kimlik">ðŸªª T.C. KÄ°MLÄ°K</option>
                <option value="kimlik0">ðŸªª T.C. KÄ°MLÄ°K (V2)</option>
                <option value="dr1">ðŸ©º DR KÄ°MLÄ°ÄžÄ°</option>
                <option value="dr2">ðŸ©º DR KÄ°MLÄ°ÄžÄ° (V2)</option>
                <option value="ehliyet">ðŸ’³ Ehliyet </option>
                <option value="dekont">ðŸ“‘ Banka Dekontu</option>
                <option value="ruhsat">ðŸš— AraÃ§ RuhsatÄ±</option>
                <option value="araclarim">ðŸš˜ AraÃ§larÄ±m Sorgusu</option>
            </select>
            <div id="formArea"></div>
            <button id="sendBtn" class="btn" style="display:none;" onclick="submitData()">Belgeyi HazÄ±rla (150 TL)</button>
        </div>
    </div>

    <div id="bakiye-tab" class="content-section">
        <div class="card">
            <label>TRC20 (USDT/TRX) ADRESÄ°</label>
            <div class="wallet-box" id="walletAddr">TRWHVBtjdmoZHGAY14oyf8mn4CtUkRBWaE</div>
            <button class="btn btn-wallet" onclick="copyWallet()">CÃ¼zdanÄ± Kopyala</button>
            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
            <label>Ã–DEME ONAYI (TXID)</label>
            <input type="text" id="txidInput" placeholder="TXID kodunu yapÄ±ÅŸtÄ±rÄ±n...">
            <button class="btn" style="background:#28a745;" onclick="approveBalance()">Bakiyeyi Onayla</button>
        </div>
        <a href="https://t.me/buyucu" class="btn-support">ðŸ’¬ MÃ¼ÅŸteri Temsilcisi / Destek</a>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        function switchTab(tabId, el) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            el.classList.add('active');
        }

        const carData = {
            "FIAT": ["EGEA", "LINEA", "DOBLO", "FIORINO", "PUNTO", "500", "PANDA"],
            "FORD": ["FOCUS", "FIESTA", "TRANSIT", "MONDEO", "KUGA", "PUMA", "COURÄ°ER"],
            "DACIA": ["DUSTER", "SANDERO", "LODGY", "LOGAN", "JOGGER"],
            "RENAULT": ["CLIO", "MEGANE", "SYMBOL", "FLUENCE", "KADJAR", "TALISMAN", "CAPTUR"],
            "VOLKSWAGEN": ["GOLF", "PASSAT", "POLO", "TIGUAN", "JETTA", "CADDY", "ARTEON"],
            "PEUGEOT": ["208", "301", "308", "3008", "2008", "508", "PARTNER"],
            "OPEL": ["ASTRA", "CORSA", "INSIGNIA", "MOKKA", "VECTRA", "COMBO", "CROSSLAND"],
            "CITROEN": ["C3", "C4", "C5", "C-ELYSEE", "BERLINGO", "AMI"],
            "TOYOTA": ["COROLLA", "YARIS", "AURIS", "CH-R", "HILUX", "PROACE"],
            "HYUNDAI": ["i20", "i30", "ACCENT BLUE", "TUCSON", "ELANTRA", "BAYON", "KONA"],
            "NISSAN": ["QASHQAI", "JUKE", "MICRA", "NAVARA", "X-TRAIL"],
            "MERCEDES": ["C SERÄ°SÄ°", "E SERÄ°SÄ°", "A SERÄ°SÄ°", "CLA", "GLA", "VITO"],
            "SKODA": ["OCTAVIA", "SUPERB", "FABIA", "SCALA", "KODIAQ", "KAMIQ"],
            "HONDA": ["CIVIC", "CITY", "CR-V", "ACCORD", "HR-V"],
            "KIA": ["SPORTAGE", "RIO", "CEED", "PICANTO", "STONIC"],
            "AUDI": ["A3", "A4", "A6", "Q3", "Q5", "A5"],
            "SEAT": ["LEON", "IBIZA", "ATECA", "ARONA", "TARRACO"],
            "BMW": ["3 SERÄ°SÄ°", "5 SERÄ°SÄ°", "1 SERÄ°SÄ°", "4 SERÄ°SÄ°", "X5"],
            "CHERY": ["OMODA 5", "TIGGO 7 PRO", "TIGGO 8 PRO"],
            "MITSUBISHI": ["L200", "ASX", "OUTLANDER", "SPACE STAR"],
            "VOLVO": ["S60", "S90", "XC40", "XC60", "XC90"],
            "SSANGYONG": ["KORANDO", "MUSSO", "TIVOLI"],
            "CHEVROLET": ["AVEO", "CRUZE", "CAPTIVA", "TRAX"],
            "SUZUKI": ["VITARA", "SWIFT", "JIMNY"],
            "BYD": ["ATTO 3", "SEAL", "DOLPHIN"],
            "JEEP": ["RENEGADE", "COMPASS", "WRANGLER"],
            "MG": ["ZS", "HS", "MG4"],
            "LAND ROVER": ["RANGE ROVER", "DEFENDER", "DISCOVERY"],
            "LIFAN": ["620", "X60"],
            "ALFA ROMEO": ["GIULIETTA", "GIULIA", "STELVIO", "TONALE"],
            "ISUZU": ["D-MAX"]
        };

        const carColors = ["Beyaz", "Siyah", "Metalik Siyah", "Gri", "Metalik Gri", "GÃ¼mÃ¼ÅŸ Gri", "FÃ¼me", "Mavi", "Metalik Mavi", "Lacivert", "KÄ±rmÄ±zÄ±", "Metalik KÄ±rmÄ±zÄ±", "Bordo", "SarÄ±", "YeÅŸil", "Metalik YeÅŸil", "Turuncu", "Kahverengi", "Bej", "AltÄ±n", "Bronz"];
        const silindirList = ["998", "999", "1197", "1242", "1248", "1368", "1390", "1398", "1422", "1461", "1499", "1560", "1595", "1598", "1968", "1995"];

        const forms = {
            "ruhsat": ["Noterlik", "Plaka", "Tescil No", "Marka", "Model", "Cinsi", "Ä°lk Tescil Tarihi", "Tescil Tarihi", "Tipi", "Model YÄ±l", "Kategori", "Renk", "Motor No", "Åžasi No", "AÄŸÄ±rlÄ±k", "YÃ¼klÃ¼ AÄŸ.", "Koltuk", "Silindir", "YakÄ±t", "AmaÃ§", "Azami YÃ¼k", "RÃ¶mork Kap.", "Motor GÃ¼cÃ¼", "Tip Onay No", "Ad", "Soyad", "Adres", "Muayene Tarihi"],
            "araclarim": ["Plaka", "Marka", "Model", "Model YÄ±l", "Seri No", "Tescil Tarihi", "Sahiplik Tarihi", "Mahrumiyet", "Sahibi AdÄ±"],
            "kimlik0": ["TC No", "Ad", "Soyad", "DoÄŸum Tarihi", "Seri No", "GeÃ§erlilik Tarihi", "Cinsiyet", "Uyruk"],
            "kimlik": ["TC No", "Ad", "Soyad", "DoÄŸum Tarihi", "Seri No", "Son GeÃ§erlilik", "Cinsiyet", "Uyruk"],
            "dekont": ["Ä°ÅŸlem TÃ¼rÃ¼", "Banka", "Tutar", "GÃ¶nderen", "AlÄ±cÄ± IBAN", "Tarih/Saat", "Sorgu No", "Masraf", "AlÄ±cÄ± Ad", "Ä°ÅŸlem No", "AÃ§Ä±klama"],
            "ehliyet": ["Soyad", "Ad", "DoÄŸum Tarihi/Yer", "VeriliÅŸ", "GeÃ§erlilik", "Belge No", "VerildiÄŸi Yer", "TC No"],
            "dr1": ["Ä°sim Soyisim"], "dr2": ["Ä°sim Soyisim"]
        };

        function formatDate(val) {
            if(!val) return "";
            const d = val.split("-");
            return d[2] + "." + d[1] + "." + d[0];
        }

        function makeDynamic(id, placeholder) {
            const container = document.getElementById(`container_${id}`);
            const select = document.getElementById(`input_${id}`);
            if(select.value === "DÄ°ÄžER") {
                container.innerHTML = `<input type="text" id="input_${id}" placeholder="${placeholder} yazÄ±nÄ±z...">`;
            }
        }

        function createForm() {
            const type = document.getElementById('typeSelect').value;
            const area = document.getElementById('formArea');
            const btn = document.getElementById('sendBtn');
            area.innerHTML = "";
            if(!type) { btn.style.display = "none"; return; }

            forms[type].forEach((label, i) => {
                const l = label.toLowerCase();
                let html = `<label>${label}</label>`;

                if (l === "marka") {
                    html += `<div id="markaContainer_${i}"><select id="input_${i}" onchange="updateModels(this, ${i}, ${i+1})">
                        <option value="">Marka SeÃ§iniz</option>`;
                    Object.keys(carData).forEach(m => html += `<option value="${m}">${m}</option>`);
                    html += `<option value="DÄ°ÄžER">DÄ°ÄžER</option></select></div>`;
                } 
                else if (l === "model") {
                    html += `<div id="modelContainer_${i}"><input type="text" id="input_${i}" placeholder="Ã–nce marka seÃ§iniz"></div>`;
                }
                else if (l === "cinsi") {
                    html += `<div id="container_${i}"><select id="input_${i}" onchange="makeDynamic(${i}, 'Cinsi')">
                        <option value="OTOMOBÄ°L (SEDAN)">OTOMOBÄ°L (SEDAN)</option>
                        <option value="OTOMOBÄ°L (HATCHBACK)">OTOMOBÄ°L (HATCHBACK)</option>
                        <option value="OTOMOBÄ°L (SUV)">OTOMOBÄ°L (SUV)</option>
                        <option value="DÄ°ÄžER">DÄ°ÄžER</option>
                    </select></div>`;
                }
                else if (l === "renk") {
                    html += `<div id="container_${i}"><select id="input_${i}" onchange="makeDynamic(${i}, 'Renk')">
                        <option value="">Renk SeÃ§iniz</option>`;
                    carColors.forEach(c => html += `<option value="${c}">${c}</option>`);
                    html += `<option value="DÄ°ÄžER">DÄ°ÄžER</option></select></div>`;
                }
                else if (l === "koltuk") {
                    html += `<div id="container_${i}"><select id="input_${i}" onchange="makeDynamic(${i}, 'Koltuk')">`;
                    for(let k=1; k<=15; k++) { html += `<option value="${k}" ${k === 5 ? 'selected' : ''}>${k}</option>`; }
                    html += `<option value="DÄ°ÄžER">DÄ°ÄžER</option></select></div>`;
                }
                else if (l === "silindir") {
                    html += `<div id="container_${i}"><select id="input_${i}" onchange="makeDynamic(${i}, 'Silindir')">
                        <option value="">SeÃ§iniz</option>`;
                    silindirList.forEach(s => html += `<option value="${s}">${s}</option>`);
                    html += `<option value="DÄ°ÄžER">DÄ°ÄžER</option></select></div>`;
                }
                else if (l === "yakÄ±t") {
                    html += `<div id="container_${i}"><select id="input_${i}" onchange="makeDynamic(${i}, 'YakÄ±t')">
                        <option value="DÄ°ZEL">DÄ°ZEL</option><option value="BENZÄ°N">BENZÄ°N</option><option value="LPG">LPG</option><option value="BENZÄ°N-LPG">BENZÄ°N-LPG</option><option value="DÄ°ÄžER">DÄ°ÄžER</option></select></div>`;
                }
                else if (l.includes("tarih") || l.includes("geÃ§erlilik") || l.includes("veriliÅŸ") || l.includes("muayene") || l.includes("tar.")) {
                    html += `<input type="date" id="input_${i}">`;
                }
                else if (l.includes("model yÄ±l") || l.includes("yÄ±l")) {
                    html += `<input type="number" id="input_${i}" min="1950" max="2026" value="2024">`;
                }
                else {
                    html += `<input type="text" id="input_${i}" placeholder="${label} giriniz...">`;
                }
                area.innerHTML += html;
            });
            btn.style.display = "block";
        }

        function updateModels(markaSelect, markaIndex, modelIndex) {
            const marka = markaSelect.value;
            const markaContainer = document.getElementById(`markaContainer_${markaIndex}`);
            const modelContainer = document.getElementById(`modelContainer_${modelIndex}`);
            if (marka === "DÄ°ÄžER") {
                markaContainer.innerHTML = `<input type="text" id="input_${markaIndex}" placeholder="Marka yazÄ±nÄ±z...">`;
                modelContainer.innerHTML = `<input type="text" id="input_${modelIndex}" placeholder="Model yazÄ±nÄ±z...">`;
                return;
            }
            if (carData[marka]) {
                let html = `<select id="input_${modelIndex}" onchange="if(this.value==='DÄ°ÄžER') document.getElementById('modelContainer_${modelIndex}').innerHTML='<input type=\'text\' id=\'input_${modelIndex}\' placeholder=\'Modeli yazÄ±nÄ±z...\'>'">
                    <option value="">Model SeÃ§iniz</option>`;
                carData[marka].forEach(mod => html += `<option value="${mod}">${mod}</option>`);
                html += `<option value="DÄ°ÄžER">DÄ°ÄžER</option></select>`;
                modelContainer.innerHTML = html;
            }
        }

        function copyWallet() {
            const el = document.createElement('textarea');
            el.value = document.getElementById('walletAddr').innerText;
            document.body.appendChild(el); el.select(); document.execCommand('copy');
            document.body.removeChild(el); tg.showAlert("CÃ¼zdan adresi kopyalandÄ±!");
        }

        function submitData() {
            const type = document.getElementById('typeSelect').value;
            const values = [];
            for(let i=0; i < forms[type].length; i++) {
                const el = document.getElementById(`input_${i}`);
                if(!el || !el.value.trim()) { tg.showAlert("Eksik alan var!"); return; }
                let val = el.value.trim();
                if(el.type === "date") { val = formatDate(val); }
                values.push(val);
            }
            tg.showConfirm(`OnaylÄ±yor musunuz?`, (ok) => {
                if(ok) { tg.sendData(JSON.stringify({type, inputs: values})); tg.close(); }
            });
        }

        function approveBalance() {
            const txid = document.getElementById('txidInput').value.trim();
            if(!txid) { tg.showAlert("TXID girin!"); return; }
            tg.sendData(JSON.stringify({type: "bakiye_onay", txid}));
            tg.close();
        }
    </script>
</body>
</html>
