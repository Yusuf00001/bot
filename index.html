<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Resmi Belge Ãœretim Paneli</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --tg-theme-bg-color: #f0f2f5; --tg-theme-button-color: #2481cc; --tg-theme-text-color: #000000; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--tg-theme-bg-color); color: var(--tg-theme-text-color); padding: 15px; margin: 0; padding-bottom: 80px; }
        .card { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
        select, input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 15px; outline: none; transition: 0.2s; }
        select:focus, input:focus { border-color: var(--tg-theme-button-color); border-width: 2px; }
        label { font-size: 11px; font-weight: bold; color: #777; display: block; margin-top: 10px; text-transform: uppercase; }
        .btn { background: var(--tg-theme-button-color); color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 15px; }
        .btn-wallet { background: #28a745; margin-top: 5px; font-size: 13px; padding: 10px; }
        .header { text-align: center; margin-bottom: 15px; }
        .header h2 { color: var(--tg-theme-button-color); margin: 0; }
        .wallet-box { background: #f1f3f5; border: 2px solid #dee2e6; padding: 14px; border-radius: 10px; word-break: break-all; font-family: sans-serif; font-size: 15px; text-align: center; margin-top: 10px; color: #000; font-weight: 700; }
        .footer-support { position: fixed; bottom: 15px; left: 15px; right: 15px; text-align: center; }
        .btn-support { background: #fff; color: #2481cc; border: 2px solid #2481cc; padding: 10px; border-radius: 10px; font-size: 14px; font-weight: bold; text-decoration: none; display: block; }
    </style>
</head>
<body>
    <div class="header"><h2>ðŸ“Š Ä°ÅŸlem MenÃ¼sÃ¼</h2></div>
    
    <div class="card">
        <label>ðŸ›  BELGE ÃœRETÄ°M SÄ°STEMÄ°</label>
        <select id="typeSelect" onchange="createForm()">
            <option value="">-- BELGE TÃœRÃœ SEÃ‡Ä°NÄ°Z --</option>
            <option value="kimlik">ðŸªª T.C. KÄ°MLÄ°K</option>
            <option value="kimlik0">ðŸªª T.C. KÄ°MLÄ°K (V2)</option>
            <option value="dr1">ðŸ©º DR KÄ°MLÄ°ÄžÄ°</option>
            <option value="dr2">ðŸ©º DR KÄ°MLÄ°ÄžÄ° (V2)</option>
            <option value="ehliyet">ðŸ’³ Ehliyet </option>
            <option value="dekont">ðŸ“‘ Banka Dekontu</option>
            <option value="ruhsat">ðŸš— AraÃ§ RuhsatÄ±</option>
            <option value="araclarim">ðŸš˜ AraÃ§larÄ±m Sorgusu</option>
        </select>
        <div id="formArea"></div>
        <button id="sendBtn" class="btn" style="display:none;" onclick="submitData()">Belgeyi HazÄ±rla (150 TL)</button>
    </div>

    <div class="card" style="border-top: 4px solid #28a745;">
        <label>ðŸ’° BAKÄ°YE YÃœKLEME & ONAY</label>
        <div class="wallet-box" id="walletAddr">TRWHVBtjdmoZHGAY14oyf8mn4CtUkRBWaE</div>
        <button class="btn btn-wallet" onclick="copyWallet()">CÃ¼zdanÄ± Kopyala</button>
        <hr style="margin: 15px 0; border: 0; border-top: 1px solid #eee;">
        <label>TXID KODU</label>
        <input type="text" id="txidInput" placeholder="TXID kodunu yapÄ±ÅŸtÄ±rÄ±n...">
        <button class="btn" style="background:#28a745; margin-top:5px;" onclick="approveBalance()">Bakiyeyi Onayla</button>
    </div>

    <div class="footer-support">
        <a href="https://t.me/buyucu" class="btn-support">ðŸ’¬ Admin / Destek</a>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const carData = {
            "VOLKSWAGEN": ["GOLF", "PASSAT", "POLO", "TIGUAN", "JETTA", "CADDY", "ARTEON", "T-ROC"],
            "RENAULT": ["CLIO", "MEGANE", "SYMBOL", "FLUENCE", "KADJAR", "TALISMAN", "CAPTUR", "KOLEOS"],
            "FIAT": ["EGEA", "LINEA", "DOBLO", "FIORINO", "PUNTO", "500L", "PANDA"],
            "FORD": ["FOCUS", "FIESTA", "TRANSIT", "MONDEO", "RANGER", "KUGA", "PUMA", "COURÄ°ER"],
            "HYUNDAI": ["i20", "i30", "ACCENT BLUE", "TUCSON", "ELANTRA", "BAYON", "KONA", "GETZ"],
            "TOYOTA": ["COROLLA", "YARIS", "AURIS", "CH-R", "HILUX", "RAV4", "PROACE"],
            "HONDA": ["CIVIC", "CITY", "CR-V", "ACCORD", "HR-V", "JAZZ"],
            "PEUGEOT": ["206", "208", "301", "308", "3008", "2008", "508", "PARTNER", "RIFTER"],
            "OPEL": ["ASTRA", "CORSA", "INSIGNIA", "MOKKA", "VECTRA", "COMBO", "CROSSLAND"],
            "CITROEN": ["C3", "C4", "C5 AIRCROSS", "C-ELYSEE", "BERLINGO", "C3 AIRCROSS"],
            "SKODA": ["OCTAVIA", "SUPERB", "FABIA", "SCALA", "KODIAQ", "KAROQ", "KAMIQ"],
            "DACIA": ["DUSTER", "SANDERO", "LODGY", "LOGAN", "DOKKER", "JOGGER"],
            "AUDI": ["A3", "A4", "A6", "Q3", "Q5", "Q2", "A5"],
            "BMW": ["1 SERÄ°SÄ°", "2 SERÄ°SÄ°", "3 SERÄ°SÄ°", "4 SERÄ°SÄ°", "5 SERÄ°SÄ°", "X1", "X3", "X5"],
            "MERCEDES": ["A SERÄ°SÄ°", "B SERÄ°SÄ°", "C SERÄ°SÄ°", "E SERÄ°SÄ°", "CLA", "GLA", "GLC", "VITO"],
            "VOLVO": ["S40", "S60", "S90", "V40", "XC40", "XC60", "XC90"]
        };

        const carColors = ["Beyaz", "Siyah", "Metalik Siyah", "Gri", "Metalik Gri", "GÃ¼mÃ¼ÅŸ Gri", "FÃ¼me", "Mavi", "Metalik Mavi", "Lacivert", "KÄ±rmÄ±zÄ±", "Metalik KÄ±rmÄ±zÄ±", "Bordo", "SarÄ±", "YeÅŸil", "Metalik YeÅŸil", "Turuncu", "Kahverengi", "Bej", "AltÄ±n", "Bronz"];

        const forms = {
            "ruhsat": ["Noterlik", "Plaka", "Tescil No", "Marka", "Model", "Cinsi", "Ä°lk Tescil Tarihi", "Tescil Tarihi", "Tipi", "Model YÄ±l", "Kategori", "Renk", "Motor No", "Åžasi No", "AÄŸÄ±rlÄ±k", "YÃ¼klÃ¼ AÄŸ.", "Koltuk", "Silindir", "YakÄ±t", "AmaÃ§", "Azami YÃ¼k", "RÃ¶mork Kap.", "Motor GÃ¼cÃ¼", "Tip Onay No", "Ad", "Soyad", "Adres", "Muayene Tarihi"],
            "araclarim": ["Plaka", "Marka", "Model", "Model YÄ±l", "Seri No", "Tescil Tarihi", "Sahiplik Tarihi", "Mahrumiyet", "Sahibi AdÄ±"],
            "kimlik0": ["TC No", "Ad", "Soyad", "DoÄŸum Tarihi", "Seri No", "GeÃ§erlilik Tarihi", "Cinsiyet", "Uyruk"],
            "kimlik": ["TC No", "Ad", "Soyad", "DoÄŸum Tarihi", "Seri No", "Son GeÃ§erlilik", "Cinsiyet", "Uyruk"],
            "dekont": ["Ä°ÅŸlem TÃ¼rÃ¼", "Banka", "Tutar", "GÃ¶nderen", "AlÄ±cÄ± IBAN", "Tarih/Saat", "Sorgu No", "Masraf", "AlÄ±cÄ± Ad", "Ä°ÅŸlem No", "AÃ§Ä±klama"],
            "ehliyet": ["Soyad", "Ad", "DoÄŸum Tarihi/Yer", "VeriliÅŸ", "GeÃ§erlilik", "Belge No", "VerildiÄŸi Yer", "TC No"],
            "dr1": ["Ä°sim Soyisim"], "dr2": ["Ä°sim Soyisim"]
        };

        function createForm() {
            const type = document.getElementById('typeSelect').value;
            const area = document.getElementById('formArea');
            const btn = document.getElementById('sendBtn');
            area.innerHTML = "";
            if(!type) { btn.style.display = "none"; return; }

            forms[type].forEach((label, i) => {
                const l = label.toLowerCase();
                let html = `<label>${label}</label>`;

                if (l === "marka") {
                    html += `<div id="markaContainer_${i}"><select id="input_${i}" onchange="updateModels(this, ${i}, ${i+1})">
                        <option value="">Marka SeÃ§iniz</option>`;
                    Object.keys(carData).forEach(m => html += `<option value="${m}">${m}</option>`);
                    html += `<option value="DÄ°ÄžER">DÄ°ÄžER (EL Ä°LE YAZ)</option></select></div>`;
                } 
                else if (l === "model") {
                    html += `<div id="modelContainer_${i}"><input type="text" id="input_${i}" placeholder="Ã–nce marka seÃ§iniz"></div>`;
                }
                else if (l === "cinsi") {
                    html += `<select id="input_${i}">
                        <option value="OTOMOBÄ°L (SEDAN)">OTOMOBÄ°L (SEDAN)</option>
                        <option value="OTOMOBÄ°L (HATCHBACK)">OTOMOBÄ°L (HATCHBACK)</option>
                        <option value="OTOMOBÄ°L (SUV)">OTOMOBÄ°L (SUV)</option>
                    </select>`;
                }
                else if (l === "renk") {
                    html += `<select id="input_${i}"><option value="">Renk SeÃ§iniz</option>`;
                    carColors.forEach(c => html += `<option value="${c}">${c}</option>`);
                    html += `</select>`;
                }
                else if (l === "koltuk") {
                    html += `<select id="input_${i}">`;
                    for(let k=1; k<=15; k++) {
                        html += `<option value="${k}" ${k === 5 ? 'selected' : ''}>${k}</option>`;
                    }
                    html += `</select>`;
                }
                else if (l.includes("tarih") || l.includes("geÃ§erlilik") || l.includes("veriliÅŸ") || l.includes("muayene") || l.includes("tar.")) {
                    html += `<input type="date" id="input_${i}">`;
                }
                else if (l.includes("model yÄ±l") || l.includes("yÄ±l")) {
                    html += `<input type="number" id="input_${i}" min="1950" max="2026" value="2024">`;
                }
                else if (l === "yakÄ±t") {
                    html += `<select id="input_${i}"><option value="DÄ°ZEL">DÄ°ZEL</option><option value="BENZÄ°N">BENZÄ°N</option><option value="LPG">LPG</option><option value="BENZÄ°N-LPG">BENZÄ°N-LPG</option></select>`;
                }
                else {
                    html += `<input type="text" id="input_${i}" placeholder="${label} giriniz...">`;
                }
                area.innerHTML += html;
            });
            btn.style.display = "block";
        }

        function updateModels(markaSelect, markaIndex, modelIndex) {
            const marka = markaSelect.value;
            const markaContainer = document.getElementById(`markaContainer_${markaIndex}`);
            const modelContainer = document.getElementById(`modelContainer_${modelIndex}`);

            if (marka === "DÄ°ÄžER") {
                markaContainer.innerHTML = `<input type="text" id="input_${markaIndex}" placeholder="MarkayÄ± el ile yazÄ±nÄ±z...">`;
                modelContainer.innerHTML = `<input type="text" id="input_${modelIndex}" placeholder="Modeli el ile yazÄ±nÄ±z...">`;
                return;
            }

            if (carData[marka]) {
                let html = `<select id="input_${modelIndex}"><option value="">Model SeÃ§iniz</option>`;
                carData[marka].forEach(mod => html += `<option value="${mod}">${mod}</option>`);
                html += `<option value="DÄ°ÄžER">DÄ°ÄžER (EL Ä°LE YAZ)</option></select>`;
                modelContainer.innerHTML = html;

                modelContainer.querySelector('select').onchange = function() {
                    if(this.value === "DÄ°ÄžER") {
                        modelContainer.innerHTML = `<input type="text" id="input_${modelIndex}" placeholder="Modeli el ile yazÄ±nÄ±z...">`;
                    }
                };
            }
        }

        function copyWallet() {
            const el = document.createElement('textarea');
            el.value = document.getElementById('walletAddr').innerText;
            document.body.appendChild(el); el.select(); document.execCommand('copy');
            document.body.removeChild(el); tg.showAlert("CÃ¼zdan adresi kopyalandÄ±!");
        }

        function submitData() {
            const type = document.getElementById('typeSelect').value;
            const values = [];
            for(let i=0; i < forms[type].length; i++) {
                const el = document.getElementById(`input_${i}`);
                if(!el || !el.value.trim()) { tg.showAlert("LÃ¼tfen tÃ¼m alanlarÄ± doldurun!"); return; }
                values.push(el.value.trim());
            }
            tg.showConfirm(`Ä°ÅŸlem onaylansÄ±n mÄ±?`, (ok) => {
                if(ok) { tg.sendData(JSON.stringify({type, inputs: values})); tg.close(); }
            });
        }

        function approveBalance() {
            const txid = document.getElementById('txidInput').value.trim();
            if(!txid) { tg.showAlert("TXID girin!"); return; }
            tg.sendData(JSON.stringify({type: "bakiye_onay", txid}));
            tg.close();
        }
    </script>
</body>
</html>
